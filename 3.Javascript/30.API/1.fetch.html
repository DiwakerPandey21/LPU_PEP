<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API</title>
</head>

<body>

    <h1>Learning about API's</h1>
    <div class="container"></div>
    <script>

        // // 1.1:
        // // fetch: It is a JS built in web-api to make HTTP requests(get data from the server/ retrieve data from the server)
        // // It present data in object form.
        // fetch(url).then((data) => {
        //     console.log(data) // raw data from object response.
        //     return data.json(); // data(object) convert to JS object
        // }).then((data) => {
        //     console.log(data);
        // }).catch((error) => {
        //     console.log(err);
        // })

        // // 1.2: fetch using real api:
        // let url = "https://jsonplaceholder.typicode.com/todos/1"
        // fetch(url).then((data) => {
        //     console.log(data);
        //     return data.json();
        // }).then((data) => {
        //     console.log(data);
        // }).catch((err) => {
        //     console.log(err)
        // })

        // // 1.3: using async/await:
        // let url = "https://jsonplaceholder.typicode.com/todos/1"

        // async function getData() {

        //     try {
        //         let response = await fetch(url);
        //         let resultData = await response.json();
        //         console.log(resultData)
        //     } catch (err) {
        //         console.log(err)
        //     }
        // }
        // getData()

        // // 1.4: fetch + (dom)render data 
        // let url = "https://swapi.info/api/people/1"


        // let container = document.querySelector(".container");


        // async function getStarWarsData() {
        //     try {
        //         let response = await fetch(url);
        //         let data = await response.json();
        //         showData(data);
        //     } catch (err) {
        //         console.log(err)
        //     }
        // }
        // getStarWarsData();

        // function showData(data) {
        //     container.innerHTML = "";
        //     let div = document.createElement("div");
        //     div.innerHTML = `
        //      <div class="name"> ${data.name}</div>
        //      <div class="gender"> ${data.gender}</div>
        //      <div class="height"> ${data.height}</div>
        //     `;
        //     container.append(div);
        // }

        // // 1.6: fetch with header:
        // const url = "https://jsonplaceholder.typicode.com/todos/1"

        // // Additional data that you want to pass with the request
        // const extraInfo = {
        //     method: "GET",
        //     header: {
        //         "X-API-Key": "Your_Key"
        //     }
        // }

        // async function getData() {
        //     try {
        //         const response = await fetch(url, extraInfo);
        //         const result = await response.json();
        //         console.log(result);
        //     } catch (err) {
        //         console.log(err)
        //     }
        // }

        // 1.7: weather api with api key:
        const apiKey = "17ea5ab8b8564c70b5885948260602";
        const city = "delhi";

        const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

        async function getWeather() {
            try {
                const response = await fetch(url);
                const data = await response.json();

                console.log("City:", data.name);
                // console.log("Temperature:", data.main.temp);
                console.log("Weather:", data.weather[0].description);
            } catch (err) {
                console.log("Error:", err);
            }
        }
        getWeather();




    </script>

</body>

</html>